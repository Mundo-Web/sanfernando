import{R as e,r as o}from"./YTEmbed-TT1qJ6UJ.js";import{c as A}from"./ReactAppend-KDUPWIs7.js";import{C as B}from"./CreateReactScript-DoGUH63A.js";import{m as u}from"./main-jzs2GwAM.js";import"./SliderFront-HPKR9-_A.js";import{C as M}from"./Curse-L0-kR5cl.js";import"./SliderTestimony-Z4t0tk7t.js";import{S as R}from"./SelectSecond-Am4rvYjZ.js";import{F as _}from"./FilterPagination-mejO9PtN.js";import{a as q}from"./axios-_sX4vCAy.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./index-PQumg_A6.js";import"./CreateReactScript-RK7sE0Jg.js";import"./truncateText-C3yxPslF.js";import"./tippy-react.esm-TjKtyAyW.js";import"./Teacher-Gbl14if9.js";const T=({productos:x,env_url:m,userIsLogged:h,categorias:s})=>{o.useState(!1);const r=o.useRef({query:"",order:"",category:u.GET.category?[u.GET.category]:[],subcategory:u.GET.subcategory?[u.GET.subcategory]:[]}),N=[{value:"a-z",label:"Desde A a Z"},{value:"z-a",label:"Desde Z a A"},{value:"ultimos",label:"Ultimos"}],[i,b]=o.useState(),[p,w]=o.useState(!0),[d,v]=o.useState(!0),f=9,[g,E]=o.useState(1),[C,S]=o.useState(0);o.useEffect(()=>{c()},[null]),o.useEffect(()=>{c()},[g]);const c=async()=>{let t=r.current;Array.isArray(t.category)&&t.category,b([]);try{const l=(await q.post(`/buscarSimulacro?query=${t.query}&order=${t.order}&category=${t.category.join(",")}&subcategory=${t.subcategory.join(",")}`,{skip:f*(g-1),requireTotalCount:!0,take:f})).data;b(l.resultado),S(l.totalCount??0)}catch(a){console.error("Error fetching search results:",a)}},k=async t=>{E(1),r.current={...r.current,query:t.target.value},c()},F=t=>{r.current={...r.current,order:t.value},c()},$=(t,a)=>{console.log(t,a),Array.isArray(r.current.category)||(r.current.category=[]),a?r.current={...r.current,category:[...new Set([...r.current.category,t])]}:r.current={...r.current,category:r.current.category.filter(l=>l!==t),subcategory:r.current.subcategory.filter(l=>!s.map(n=>n.id==t?n.subcategories.map(y=>y.id):null).flat().filter(Boolean).includes(l))},c()},j=(t,a,l)=>{Array.isArray(r.current.subcategory)||(r.current.subcategory=[]),l?r.current={...r.current,category:[...new Set([...r.current.category,t])],subcategory:[...new Set([...r.current.subcategory,a])]}:r.current={...r.current,subcategory:r.current.subcategory.filter(n=>n!==a)},c()};return e.createElement(e.Fragment,null,e.createElement("section",{className:"flex flex-col"},e.createElement("div",{className:"flex flex-col justify-center items-center px-[8%] py-10 xl:py-16 w-full max-w-3xl text-center mx-auto gap-5"},e.createElement("h1",{className:"text-4xl lg:text-5xl font-Montserrat_Bold font-bold"},"Simulacros"),e.createElement("div",{className:"flex flex-wrap gap-2.5 items-center px-4 py-2 w-full bg-[#566574] bg-opacity-10 rounded-3xl max-md:max-w-full"},e.createElement("label",{htmlFor:"searchInput",className:"sr-only"},"Buscar por nombre especialidad o palabras"),e.createElement("input",{type:"text",id:"searchInput",onChange:k,placeholder:"Buscar por nombre del curso, especialidad o palabras",className:"flex-1 w-full py-3 px-3 text-base font-poppins_regular text-[#2D464C] border-0 focus:border-0 focus:ring-0 bg-transparent",style:{outline:"none !important",border:"none"},defaultValue:u.GET.search}),e.createElement("a",{className:"w-auto bg-[#F19905] px-6 py-2 rounded-2xl text-base text-white font-Montserrat_SemiBold"},"Buscar")))),e.createElement("section",{className:"flex flex-col !font-normal pb-10 xl:pb-16"},e.createElement("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-12 px-[5%] lg:px-[8%] w-full"},e.createElement("div",{className:"flex flex-col w-full lg:w-1/3"},e.createElement("div",{className:"relative w-full mb-8"},e.createElement("div",{className:"py-3 px-4 cursor-pointer flex  justify-between items-center",onClick:()=>w(!p)},e.createElement("span",{className:"font-Montserrat_Bold text-[#221F1F] text-xl"},"Categorias"),e.createElement("span",{className:`transform transition-transform ${p?"rotate-180":""}`},e.createElement("i",{className:"fa-solid fa-chevron-down"}))),e.createElement("ul",{className:`w-full px-4 pb-6 pt-2 flex flex-col gap-3  border-b border-gray-300 z-10 ${p?"block":"hidden"}`},s.length>0&&s.map((t,a)=>e.createElement("li",{key:`category-${t.id}`,className:"flex flex-row items-start justify-start"},e.createElement("input",{type:"checkbox",id:`react-option-${a}`,value:t.id,className:"peer rounded focus:ring-0 border-[#F19905] text-[#F19905]",onChange:l=>$(t.id,l.target.checked),checked:r.current.category.includes(t.id)}),e.createElement("label",{htmlFor:`react-option-${a}`,type:"button",className:"font-Montserrat_Regular leading-none ml-2"},t.name))))),e.createElement("div",{className:"relative w-full"},e.createElement("div",{className:"py-3 px-4 cursor-pointer flex transition-all justify-between items-center",onClick:()=>v(!d)},e.createElement("span",{className:"font-Montserrat_Bold text-[#221F1F] text-xl"},"Subcategorias"),e.createElement("span",{className:`transform transition-transform ${d?"rotate-180":""}`},e.createElement("i",{className:"fa-solid fa-chevron-down"}))),e.createElement("ul",{className:`w-full px-4 pb-6 pt-2 flex flex-col gap-3 border-b border-gray-300 z-10 ${d?"block":"hidden"}`},s.length>0&&s.map(t=>{var a,l;if(!(r.current.category.length>0&&!r.current.category.includes(t.id)||(((a=t.subcategories)==null?void 0:a.length)||0)<=0))return e.createElement("div",{key:t.id},e.createElement("p",{className:"font-semibold mb-2"},t.name),(l=t.subcategories)==null?void 0:l.map(n=>e.createElement("li",{key:`category-${n.id}`,className:"flex flex-row items-start justify-start py-1"},e.createElement("input",{type:"checkbox",id:`sc-option-${n.id}`,value:n.id,className:"peer rounded focus:ring-0 border-[#F19905] text-[#F19905]",onChange:y=>j(t.id,n.id,y.target.checked),checked:r.current.subcategory.includes(n.id)}),e.createElement("label",{htmlFor:`sc-option-${n.id}`,type:"button",className:"font-Montserrat_Regular leading-none ml-2"},n.name))))})))),e.createElement("div",{className:"flex flex-col w-full lg:w-2/3"},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2  w-full gap-12  pb-12"},e.createElement("div",{className:"col-span-1 lg:col-span-2 flex flex-col md:flex-row md:justify-end gap-3 justify-center items-start  min-w-[240px] font-Montserrat_Regular"},e.createElement("span",{className:"self-stretch my-auto text-sm tracking-normal leading-loose text-gray-600 ml-1"},"Ordenar por:"),e.createElement(R,{title:"Seleccionar ",options:N,handleOptionChange:F})),i==null?void 0:i.map((t,a)=>e.createElement(M,{key:a,producto:t,env_url:m,userIsLogged:h}))),e.createElement(_,{current:g,setCurrent:E,pages:Math.ceil(C/f)})))))};B((x,m)=>{A(x).render(e.createElement(T,{...m}))});
