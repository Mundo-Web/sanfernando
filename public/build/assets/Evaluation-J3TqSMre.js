var F=Object.defineProperty;var I=(t,r,n)=>r in t?F(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n;var v=(t,r,n)=>(I(t,typeof r!="symbol"?r+"":r,n),n);import{R as e,r as u}from"./YTEmbed-TT1qJ6UJ.js";import{c as A}from"./ReactAppend-KDUPWIs7.js";import{C as T}from"./CreateReactScript-DoGUH63A.js";import{S as y}from"./FormEstudiante-StMcfUlx.js";import{B as D}from"./BasicRest-6H19Tby_.js";import{A as M}from"./AttempsRest-uxVrZsb6.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./index-PQumg_A6.js";import"./CreateReactScript-RK7sE0Jg.js";import"./axios-_sX4vCAy.js";import"./main-jzs2GwAM.js";class z extends D{constructor(){super(...arguments);v(this,"path","attemp-details")}}const P=new M,k=new z,j=({evaluation:t,questions:r,attemp:n})=>{const[o,N]=u.useState(r),[w,C]=u.useState(0),[f,B]=u.useState(0),x=o.findIndex(({done:a})=>!a),l=o[x],d={hours:Math.floor(t.duration/60),minutes:t.duration%60};u.useEffect(()=>{const a=moment(n.created_at),s=t.duration*60,i=setInterval(()=>{const m=moment().diff(a,"seconds"),R=m/s*100,q=Math.min(R,100);C(q),B(m),w>=100&&(clearInterval(i),g())},1e3);return()=>clearInterval(i)},[n.created_at,t.duration]);const E=Math.floor(f/3600),h=Math.floor(f%3600/60),b=f%60;let c="";E>0&&(c+=`${E}h `),h>0&&(c+=`${h}m `),(b>0||c==="")&&(c+=`${b}s`);const S=async()=>{const{isConfirmed:a}=await y.fire({title:"¿Estás seguro?",text:"No podras volver atras. Asegurate de haber marcado la respuesta correcta.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, continuar",cancelButtonText:"Cancelar"});if(!a)return;const s={question_id:l.id,answer_id:$('[name="answer"]:checked').val(),attemp_id:n.id},i=await k.save(s);if($('[name="answer"]').prop("checked",!1),!i)return;const p=structuredClone(o);p.forEach(m=>{m.id==l.id&&(m.done=!0)}),N(p)},_=async()=>{const{isConfirmed:a}=await y.fire({title:"¿Estás seguro?",text:"Estas a punto de finalizar esta evaluacion. Asegurate de haber marcado la respuesta correcta.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, finalizar",cancelButtonText:"Cancelar"});if(!a)return;const s={question_id:l.id,answer_id:$('[name="answer"]:checked').val(),attemp_id:n.id};await k.save(s)&&g()},g=async()=>{P.delete(n.id)&&(location.href=`/micuenta/evaluation-finished/${n.id}`)};return l?e.createElement(e.Fragment,null,e.createElement("section",null,e.createElement("div",{className:"flex flex-col lg:flex-row gap-10 justify-between items-center px-[5%] lg:px-[8%] py-10 bg-rose-50 font-poppins_regular"},e.createElement("div",{className:"flex gap-8 items-center max-w-3xl"},e.createElement("div",{className:""},e.createElement("div",{className:"text-2xl font-bold font-poppins_bold leading-none text-neutral-800 "},"Examen final: ",t.name),e.createElement("div",{className:"mt-4 mb-2"},t.duration!=null&&e.createElement("div",null,e.createElement("i",{className:"far fa-clock w-6 block text-center"}),e.createElement("span",{className:"me-1"},"Duración"),e.createElement("span",null,d.hours>0&&e.createElement(e.Fragment,null,d.hours,"h")," ",d.minutes>0&&e.createElement(e.Fragment,null,d.minutes,"m"))),e.createElement("div",null,e.createElement("i",{className:"fas fa-question w-6 block text-center"}),e.createElement("span",{className:"me-1"},o.length," preguntas"))),e.createElement("div",{className:"mt-2 text-base font-medium leading-6 text-gray-600 "},t.description))),t.duration==null&&e.createElement("a",{href:`/micuenta/session/${t.course.uuid}/${t.id}`,className:"px-6 py-3 text-sm font-semibold tracking-normal text-white bg-[#CF072C] rounded-xl"},"Completar después"))),e.createElement("section",{className:"px-[5%] lg:px-[8%] font-poppins_regular"},t.duration!=null&&e.createElement("div",{className:"mx-auto mt-12 w-full max-w-3xl bg-white sticky top-4 p-4 pb-2 border rounded-md shadow-md"},e.createElement("p",{className:"mb-2"},"Tiempo transcurrido: ",c),e.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-4 dark:bg-gray-700"},e.createElement("div",{className:"bg-red-600 h-2.5 rounded-full dark:bg-red-500",style:{width:`${w}%`}}))),e.createElement("div",{className:"flex flex-col py-16 max-w-3xl mx-auto"},e.createElement("div",{className:"flex flex-col w-full max-md:max-w-full"},e.createElement("div",{className:"flex flex-col w-full font-semibold max-md:max-w-full"},e.createElement("div",{className:"text-lg leading-tight text-rose-700 max-md:max-w-full"},"Pregunta ",x+1),e.createElement("div",{className:"mt-2 text-xl tracking-normal leading-7 text-neutral-800 max-md:max-w-full"},l.name)),e.createElement("div",{className:"flex flex-col gap-4 mt-10 w-full text-base font-medium leading-6 text-gray-600 max-md:max-w-full"},l.random_answers.filter(Boolean).map((a,s)=>e.createElement("div",{key:`answer-${s}`},e.createElement("label",{htmlFor:`answer-${a.id}`,className:"flex items-center gap-4 p-5 text-gray-500 bg-white border border-gray-200 rounded-lg cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 dark:peer-checked:text-red-500 peer-checked:border-red-600 peer-checked:text-red-600 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700 peer-checked:bg-rose-50"},e.createElement("input",{type:"radio",id:`answer-${a.id}`,name:"answer",value:a.id,className:"peer w-4 h-4 text-red-600 bg-gray-100 border-gray-300 focus:ring-red-500 dark:focus:ring-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",required:!0}),e.createElement("div",{className:"w-full"},a.name)))))),e.createElement("div",{className:"flex flex-col lg:flex-row mt-16  text-sm tracking-normal text-white w-full gap-5 items-end"},x==o.length-1?e.createElement("button",{className:"font-semibold bg-[#CF072C] rounded-2xl w-max text-center py-4 px-8",onClick:()=>_()},"Finalizar evaluación"):e.createElement("button",{className:"font-semibold bg-[#CF072C] rounded-2xl w-max text-center py-4 px-8",onClick:()=>S()},"Responder"))))):g()};T((t,r)=>{A(t).render(e.createElement(j,{...r}))});
